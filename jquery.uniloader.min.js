/*!
 * Uniloader
 * Shows mouse or overlay loaders (with a modal window optionally)
 *
 * @requires jQuery v1.4.3 or newer
 *
 * @author Grigory Zarubin (http://craigy.ru/)
 * @version 1.1.0
 * @date 01.09.2016
 *
 * Dual licensed under the MIT or GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function(a){var d={j:!1,i:"resize",D:function(){"throttledresize"in jQuery.event.L&&(this.i="throttledresize");this.A()},A:function(){var a=new Image,e=document.createElement("canvas");a.onload=function(){if(e.getContext){var b=e.getContext("2d");b.drawImage(a,0,0);d.j=0===b.getImageData(0,0,1,1).data[3]}};a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg=="},
l:function(){return{width:a(window)[0].innerWidth||a(window).width(),height:a(window)[0].innerHeight||a(window).height()}},B:function(){var d=this.l();if(0>=a(document).height()-d.height)return 0;var d=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').G("body"),e=d.children(),e=e.innerWidth()-e.height(99).innerWidth();d.remove();return e},h:function(d,e){var b=this.l(),c=d.outerWidth(),g=d.outerHeight(),f=(e?a(window).scrollLeft():0)+Math.ceil(b.width/2),b=(e?a(window).scrollTop():
0)+Math.ceil(b.height/2);return{left:0>f-c/2?0:f-c/2+"px",top:0>b-g/2?0:b-g/2+"px"}},m:{o:".modal-close",b:200,w:a.s,v:a.s,u:a.s}};a.J=function(h,e){var b=a("#uniloader-mouse"),c=a.extend(!0,{},d.m,e);if(h){if(b.length||(b=a('<div id="uniloader-mouse" />').data({"uniloader-mousemove":function(a){b.a({top:a.pageY-b.outerHeight()/2,left:a.pageX-b.outerWidth()/2})},"uniloader-onHide":c.u}),a(document.body).append(b),d.j&&b.a("backgroundImage",b.a("backgroundImage").replace(/ajax\.gif/gi,"ajax.png"))),
!b.is(":visible")){c.w();var g=d.h(b,!0);b.a({top:g.top,left:g.left}).show(c.b,function(){c.v()});a(document.body).c("mousemove.uniloader scroll.uniloader",b.data("uniloader-mousemove"))}}else b.C(c.b,function(){b.data("uniloader-onHide")()}),a(document.body).f("mousemove.uniloader scroll.uniloader",b.data("uniloader-mousemove"))};a.g=function(h,e){var b=a("#uniloader-overlay"),c=a("#uniloader-overlay-content"),g=!1;e&&e.node&&(c=a(e.node),g=!0,delete e.node);var f=a.extend(!0,{},d.m,e);h?(b.length||
(b=a('<div id="uniloader-overlay" />'),a(document.body).append(b)),c.length||(c=a('<div id="uniloader-overlay-content"><div class="uniloader-overlay-content-text" /></div>')),b.is(":visible")&&a.g(!1,{b:0}),f.w(),g&&(b.c("click.uniloader",function(){a.g()}),a(document.body).c("keypress.uniloader",function(b){27==b.keyCode&&a.g()}),c.c("click",function(a){a.stopPropagation()}).find(f.o).c("click.uniloader",function(b){b.preventDefault();a.g()})),a(window).c(d.i+".uniloader gestureend.uniloader",function(){var a=
d.h(c);c.a({top:a.top,left:a.left})}),a("html").F("uniloader-overlay-html").a("margin-right",d.B()),b.data({"uniloader-ismodal":g,"uniloader-node":c,"uniloader-node-parent":c.parent().length?c.parent():a(document.body),"uniloader-onHide":f.u}).append(c).I(f.b,1,function(){var a=d.h(c);c.a({top:a.top,left:a.left}).show(f.b,function(){f.v()})})):(c=a(b.data("uniloader-node")),b.data("uniloader-ismodal")&&(b.f(".uniloader"),a(document.body).f("keypress.uniloader"),c.find(f.o).f(".uniloader")),a(window).f(d.i+
".uniloader gestureend.uniloader"),c.C(f.b),b.H(f.b,function(){a(b.data("uniloader-node-parent")).append(c);a("html").K("uniloader-overlay-html").a("margin-right","");b.data("uniloader-onHide")()}))};d.D()})(jQuery);