/*!
 * Uniloader
 * Shows mouse or overlay loaders (with a modal window optionally)
 *
 * @requires jQuery v1.4.3 or newer
 *
 * @author Grigory Zarubin (http://craigy.ru/)
 * @version 1.1.1
 * @date 09.09.2016
 *
 * Dual licensed under the MIT or GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function(a){var e={j:!1,i:"resize",F:function(){"throttledresize"in jQuery.event.L&&(this.i="throttledresize");this.w()},w:function(){var a=new Image,d=document.createElement("canvas");a.onload=function(){if(d.getContext){var b=d.getContext("2d");b.drawImage(a,0,0);e.j=0===b.getImageData(0,0,1,1).data[3]}};a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg=="},
B:function(){return{width:a(window)[0].innerWidth||a(window).width(),height:a(window)[0].innerHeight||a(window).height()}},A:function(){var e=a(window).width(),d=0;a("html").C("uniloader-overlay-html");a(window).width()!=e&&(e=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').H("body"),d=e.children(),d=d.innerWidth()-d.height(99).innerWidth(),e.remove());a("html").G("uniloader-overlay-html");return d},h:function(e,d){var b=this.B(),c=e.outerWidth(),g=e.outerHeight(),f=(d?a(window).scrollLeft():
0)+Math.ceil(b.width/2),b=(d?a(window).scrollTop():0)+Math.ceil(b.height/2);return{left:0>f-c/2?0:f-c/2+"px",top:0>b-g/2?0:b-g/2+"px"}},l:{m:".modal-close",b:200,v:a.o,u:a.o,s:a.o}};a.K=function(h,d){var b=a("#uniloader-mouse"),c=a.extend(!0,{},e.l,d);if(h){if(b.length||(b=a('<div id="uniloader-mouse" />').data({"uniloader-mousemove":function(a){b.a({top:a.pageY-b.outerHeight()/2,left:a.pageX-b.outerWidth()/2})},"uniloader-onHide":c.s}),a(document.body).append(b),e.j&&b.a("backgroundImage",b.a("backgroundImage").replace(/ajax\.gif/gi,
"ajax.png"))),!b.is(":visible")){c.v();var g=e.h(b,!0);b.a({top:g.top,left:g.left}).show(c.b,function(){c.u()});a(document.body).c("mousemove.uniloader scroll.uniloader",b.data("uniloader-mousemove"))}}else b.D(c.b,function(){b.data("uniloader-onHide")()}),a(document.body).f("mousemove.uniloader scroll.uniloader",b.data("uniloader-mousemove"))};a.g=function(h,d){var b=a("#uniloader-overlay"),c=a("#uniloader-overlay-content"),g=!1;d&&d.node&&(c=a(d.node),g=!0,delete d.node);var f=a.extend(!0,{},e.l,
d);h?(b.length||(b=a('<div id="uniloader-overlay" />'),a(document.body).append(b)),c.length||(c=a('<div id="uniloader-overlay-content"><div class="uniloader-overlay-content-text" /></div>')),b.is(":visible")&&a.g(!1,{b:0}),f.v(),g&&(b.c("click.uniloader",function(){a.g()}),a(document.body).c("keypress.uniloader",function(b){27==b.keyCode&&a.g()}),c.c("click",function(a){a.stopPropagation()}).find(f.m).c("click.uniloader",function(b){b.preventDefault();a.g()})),a(window).c(e.i+".uniloader gestureend.uniloader",
function(){var a=e.h(c);c.a({top:a.top,left:a.left})}),a("html").a("margin-right",e.A()).C("uniloader-overlay-html"),b.data({"uniloader-ismodal":g,"uniloader-node":c,"uniloader-node-parent":c.parent().length?c.parent():a(document.body),"uniloader-onHide":f.s}).append(c).J(f.b,1,function(){var a=e.h(c);c.a({top:a.top,left:a.left}).show(f.b,function(){f.u()})})):(c=a(b.data("uniloader-node")),b.data("uniloader-ismodal")&&(b.f(".uniloader"),a(document.body).f("keypress.uniloader"),c.find(f.m).f(".uniloader")),
a(window).f(e.i+".uniloader gestureend.uniloader"),c.D(f.b),b.I(f.b,function(){a(b.data("uniloader-node-parent")).append(c);a("html").G("uniloader-overlay-html").a("margin-right","");b.data("uniloader-onHide")()}))};e.F()})(jQuery);